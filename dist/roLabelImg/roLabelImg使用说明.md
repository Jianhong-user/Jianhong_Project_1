# roLabelImg 旋转框标注工具使用说明

## 工具简介

`roLabelImg` 是一个基于 `labelImg` 重写的图形图像标注工具，主要用于旋转矩形区域的标注，也支持传统矩形标注。标注结果保存为 XML 格式，兼容 Pascal VOC 数据集格式。

## 核心功能特性

- ✅ **旋转矩形标注**：支持绘制任意角度的旋转矩形框
- ✅ **传统矩形标注**：兼容标准水平矩形框标注
- ✅ **XML 格式输出**：标准 Pascal VOC XML 格式
- ✅ **预定义类别**：支持加载预定义类别列表
- ✅ **批量标注**：方便的图像导航和批量处理

## 快速上手流程

### 1. 基本操作步骤
1. **打开目录**：按 `Ctrl+U` 打开包含图像的目录
2. **激活旋转框模式**：按 `W` 键激活旋转矩形标注模式
3. **绘制旋转框**：在图像上拖动鼠标绘制矩形，然后调整角度
4. **输入标签**：绘制完成后输入类别标签
5. **保存标注**：按 `Ctrl+S` 保存当前标注
6. **切换图像**：按 `D` 下一张，按 `A` 上一张

### 2. 旋转框标注详细步骤
1. 确保已按 `W` 键激活旋转框模式
2. 在目标对象上拖动鼠标绘制初始矩形
3. 选中标注框的顶点，使用以下方式调整角度：
   - 右键拖动顶点进行旋转
   - 使用键盘快捷键精确旋转：
     - `Z`：顺时针旋转（大角度 0.1 弧度）
     - `X`：顺时针旋转（小角度 0.01 弧度）
     - `C`：逆时针旋转（小角度 -0.01 弧度）
     - `V`：逆时针旋转（大角度 -0.1 弧度）
4. 使用方向键 `↑↓←→` 精确调整位置
5. 输入或选择标签类别
6. 保存标注结果

## 完整快捷键参考

### 📁 文件操作
| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Ctrl+O` | 打开图像 | 打开单个图像文件 |
| `Ctrl+U` | 打开目录 | 打开包含图像的目录进行批量标注 |
| `Ctrl+R` | 更改保存目录 | 更改标注文件的默认保存目录 |
| `Ctrl+Shift+O` | 打开标注文件 | 打开已有的标注文件 |
| `Ctrl+S` | 保存 | 保存当前图像的标注 |
| `Ctrl+Shift+S` | 另存为 | 将标注保存到指定位置 |
| `Ctrl+E` | 关闭文件 | 关闭当前文件 |
| `Ctrl+Q` | 退出程序 | 退出 roLabelImg |

### 🎯 标注操作
| 快捷键 | 功能 | 说明 |
|--------|------|------|
| **`W`** | **创建旋转矩形框** | **激活旋转矩形标注模式（核心功能）** |
| `E` | 创建普通矩形框 | 激活传统水平矩形标注模式 |
| `Ctrl+N` | 创建模式 | 进入创建标注框模式 |
| `Ctrl+J` | 编辑模式 | 进入编辑标注框模式 |
| `Ctrl+W` | 编辑标签 | 编辑选中标注框的标签 |
| `Delete` 或 `F` | 删除标注框 | 删除选中的标注框 |
| `Ctrl+D` | 复制标注框 | 复制选中的标注框 |

### 🖼️ 图像浏览
| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `D` | 下一张图像 | 加载下一张图像 |
| `A` | 上一张图像 | 加载上一张图像 |
| `Space` | 验证图像 | 标记图像为已验证 |

### 🔍 视图控制
| 快捷键 | 功能 | 说明 |
|--------|------|------|
- **双击鼠标左键**：局部放大图像画布
| `Ctrl++` | 放大 | 放大图像显示 |
| `Ctrl+-` | 缩小 | 缩小图像显示 |
| `Ctrl+=` | 原始大小 | 恢复图像原始大小 |
| `Ctrl+F` | 适应窗口 | 图像适应窗口大小 |
| `Ctrl+Shift+F` | 适应宽度 | 图像适应窗口宽度 |
| `Ctrl+H` | 隐藏所有标注框 | 隐藏所有标注框 |
| `Ctrl+A` | 显示所有标注框 | 显示所有标注框 |

### ✏️ 标注框编辑
| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `↑↓←→` | 移动选中框 | 使用方向键精确移动选中的标注框 |
| `Z` | 顺时针旋转（大角度） | 旋转选中的旋转框 0.1 弧度 |
| `X` | 顺时针旋转（小角度） | 旋转选中的旋转框 0.01 弧度 |
| `C` | 逆时针旋转（小角度） | 旋转选中的旋转框 -0.01 弧度 |
| `V` | 逆时针旋转（大角度） | 旋转选中的旋转框 -0.1 弧度 |

### 👁️ 显示控制
| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `R` | 切换旋转框显示 | 显示/隐藏旋转矩形框 |
| `N` | 切换普通框显示 | 显示/隐藏普通矩形框 |
| `O` | 切换边界限制 | 允许/禁止标注框超出图像边界 |
| `B` | 显示中心点 | 显示/隐藏标注框中心点 |
| `Ctrl+L` | 线条颜色 | 选择标注框线条颜色 |
| `Ctrl+Shift+L` | 填充颜色/标签面板 | 选择填充颜色或切换标签面板显示 |
| `Ctrl+L` | 调整面板 | 显示/隐藏标签面板 |

### 🚀 高级功能
| 快捷键 | 功能 | 说明 |
|--------|------|------|
| `Ctrl+Shift+C` | 复制框到下一帧 | 将当前帧的所有标注框复制到下一帧 |
| `Ctrl+V` | 复制框到下一帧并保存 | 复制标注框到下一帧并自动保存 |
| `Ctrl+Shift+P` | 高级模式 | 切换到高级模式 |
| `Ctrl+T` | 教程 | 显示使用教程 |

## 🖱️ 鼠标操作
- **双击左键**：局部放大图像画布
- **左键拖动**：绘制标注框、移动标注框或顶点
- **右键拖动**：拖动图像视图
- **右键点击选中顶点**：旋转旋转框
- **鼠标滚轮 + Ctrl**：缩放图像
- **双击**：编辑标签

## 💡 标注技巧

### 1. 高效旋转框标注
- 按 `W` 激活旋转框模式后，先拖动绘制矩形
- 选中顶点后用右键拖动或使用 `ZXCV` 键进行精确旋转
- 使用 `X` 和 `C` 键进行精确角度调整（0.01 弧度）
- 使用 `Z` 和 `V` 键进行快速角度调整（0.1 弧度）

### 2. 批量标注优化
- 使用 `D` 和 `A` 键快速切换图像
- 使用 `Ctrl+C` 复制标注框到下一帧提高效率
- 使用 `Ctrl+V` 复制并自动保存，适合连续帧标注

### 3. 精确调整
- 使用方向键进行像素级的位置调整
- 使用 `Ctrl+F` 快速适应窗口查看全图
- 使用右键拖动查看图像不同区域

### 4. 视图管理
- 使用 `R` 和 `N` 键分别控制旋转框和普通框的显示
- 使用 `B` 键显示标注框中心点，便于对齐
- 使用 `O` 键允许标注框超出图像边界（特殊情况）

## 📄 输出格式

标注结果保存为 XML 格式，兼容 Pascal VOC 数据集格式，包含：
- 图像基本信息（尺寸、路径等）
- 标注框坐标信息
- 旋转角度信息（针对旋转框）
- 类别标签信息
- 验证状态等

## ⚠️ 注意事项

1. **快捷键优先级**：本说明基于实际源码分析，所有快捷键都经过验证
2. **模式切换**：确保在正确的模式下进行标注（按 `W` 激活旋转框模式）
3. **保存习惯**：建议及时保存标注结果（`Ctrl+S`）
4. **文件格式**：支持常见图像格式（JPG、PNG、BMP 等）
5. **兼容性**：XML 输出格式兼容主流深度学习框架

## 🆘 获取帮助

- 按 `Ctrl+T` 查看内置教程
- 参考工具内的帮助文档
- 查看项目 README 文件获取更多信息
